# PT-START.INT-34
for INT-34

**Debian 10 и PostgreSQL 16 Ansible Playbook**
=============================================

1. Клонировать данный репозиторий на локальную машину
2. Установить Ansible на локальную машину, если вы этого еще не сделали. Вы можете следовать инструкциям по установке на сайте Ansible.
3. Перейти в клонированный репозиторий и запустить playbook с помощью команды: ``` ansible-playbook -i localhost, playbook.yml ```
4. После завершения playbook проверить, что PostgreSQL 16 установлен и запущен, подключившись к базе данных с помощью команды: ``` psql -U postgres ```

Playbook выполняет следующие задачи:

1. Устанавливает требуемые пакеты, включая PostgreSQL 16 и `libpq-dev`.
2. Настраивает файл `pg_hba.conf` для разрешения локальных подключений.
3. Настраивает файл `postgresql.conf` для установки адреса и порта прослушивания.
4. Запускает и включает службу PostgreSQL.

**Server on Python**
===============================================

Для проверки работы сервера:
1. Клонируйте репозиторий и перейдите в папку проекта.
2. Соберите проект через ``` docker build -t http-server . ```.
3. Запустите сервер с помощью ``` docker run -p 8000:8000 http-srerver ```.
4. В браузере перейдите на ``` http://localhost:8000/healthz ```.

**Monitoring ptsecurity.com**
=============================

В этом репозитории содержатся файлы конфигурации для Prometheus и Blackbox exporter, предназначенные для сбора метрик доступности и производительности сайта [ptsecurity.com](https://ptsecurity.com).

**Метрики**
---------
В этом репозитории мы собираем следующие метрики:
1. Http метрики:
- `up`: метрика доступности сайта (1 - доступен, 0 - недоступен)
- `http_response_time_seconds`: время отклика сайта в секундах
- `http_status_code`: HTTP-код статуса ответа от сайта

2. DNS метрики
- `dns_lookup_time_seconds`: время выполнения DNS-lookup в секундах

3. TCP метрики
- `tcp_connect_time_seconds`: время установления TCP-соединения в секундах

4. Blackbox метрики
- `probe_success`: метрика успешности пробы (1 - успешно, 0 - не успешно)